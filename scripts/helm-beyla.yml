extraCapabilities:
  - SYS_ADMIN
config:
  # All values REF https://github.com/grafana/beyla/blob/main/charts/beyla/values.yaml
  data:
    log_level: DEBUG
    # Contents of the actual Beyla configuration file
    # REF https://grafana.com/docs/beyla/latest/configure/service-discovery/#k8s-namespace
    discovery:
      instrument:
        - k8s_namespace: aether-5gc
    # Ref: https://grafana.com/docs/beyla/latest/configure/export-data/
    otel_metrics_export:
      endpoint: http://simplest-collector.default.svc.cluster.local:4317
      protocol: grpc
      features: ["application_span", "application_service_graph"]
      insecure_skip_verify: true
      interval: 5s
      allow_service_graph_self_references: false
      instrumentations: ["*"]
    # Ref: https://grafana.com/docs/beyla/latest/configure/export-data/
#    prometheus_export:
#      port: 8999
#      path: /metrics
##      extra_resource_attributes: [ "deployment_environment" ]
#      ttl: 5m
##      buckets:
##        request_size_histogram: [ 0, 10, 20, 22 ]
##        response_size_histogram: [ 0, 10, 20, 22 ]
#      features:
#        - application_span
#        - application_service_graph
#      instrumentations: ["*"]
    # Ref: https://grafana.com/docs/beyla/latest/configure/export-data/
    otel_traces_export:
      endpoint: http://simplest-collector.default.svc.cluster.local:4317
      protocol: grpc
      insecure_skip_verify: true
      instrumentations: ["*"]
    trace_printer: text
    routes:
      unmatched: heuristic
    attributes:
      instance_id:
        dns: true
      kubernetes:
        enable: false